<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sudoku Solver</title>

<style>
    body {
    font-family: Arial, sans-serif;
    text-align: center;
    }

    #sudoku {
        display: grid;
        grid-template-columns: repeat(9, 50px);
        grid-template-rows: repeat(9, 50px);
        width: max-content;
        margin: auto;
        border: 3px solid black; /* outer border */
    }

    .cell {
        display: flex;
        justify-content: center;
        align-items: center;
        box-sizing: border-box;
    }

    .cell input {
        width: 90%;
        height: 90%;
        border: none;
        text-align: center;
        font-size: 20px;
        outline: none;
    }

    button {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
    }
</style>
</head>

<body>

<h1>Sudoku Solver</h1>

<div id="sudoku"></div>

<button onclick="solveSudoku()">Solve</button>
<button onclick="clearGrid()">Clear</button>

<script src="sudoku.js"></script>

<script>
    // Create empty grid
    const sudokuDiv = document.getElementById("sudoku");

    for (let row = 0; row < 9; row++) {
        for (let col = 0; col < 9; col++) {
            const cell = document.createElement("div");
            cell.classList.add("cell");

            const input = document.createElement("input");
            input.type = "text";
            input.maxLength = 1;

            input.addEventListener("input", (e) => {
                const value = e.target.value;
                if (!/^[1-9]$/.test(value)) e.target.value = "";
            });

            cell.appendChild(input);

            // thin borders by default (top + left)
            cell.style.borderTop = "1px solid #999";
            cell.style.borderLeft = "1px solid #999";

            // thick vertical lines
            if (col === 2 || col === 5) {
                cell.style.borderRight = "3px solid black";
            } else if (col === 8) {
                cell.style.borderRight = "1px solid #999"; // last column
            }

            // thick horizontal lines
            if (row === 2 || row === 5) {
                cell.style.borderBottom = "3px solid black";
            } else if (row === 8) {
                cell.style.borderBottom = "1px solid #999"; // last row
            }

            sudokuDiv.appendChild(cell);
        }
    }

    function getGridFromUI() {
        const inputs = document.querySelectorAll("#sudoku input");
        const grid = [];

        for (let i = 0; i < 9; i++) {
            const row = [];
            for (let j = 0; j < 9; j++) {
                const value = inputs[i * 9 + j].value;
                row.push(value === "" ? 0 : parseInt(value));
            }
            grid.push(row);
        }

        return grid;
    }

    function fillGrid(solution) {
        const inputs = document.querySelectorAll("#sudoku input");

        for (let i = 0; i < 9; i++) {
            for (let j = 0; j < 9; j++) {
                inputs[i * 9 + j].value = solution[i][j];
            }
        }
    }

    function solveSudoku() {
        const grid = getGridFromUI();

        if (!isValidInitialGrid(grid)) {
            alert("Invalid Sudoku: duplicated numbers detected.");
            return;
        }

        const solution = solve(grid);

        if (!solution) {
            alert("No solution exists.");
            return;
        }

        fillGrid(solution);
    }

    function clearGrid() {
        const inputs = document.querySelectorAll("#sudoku input");
        inputs.forEach(input => input.value = "");
    }
</script>

</body>
</html>